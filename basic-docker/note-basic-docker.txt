Bagian 1 Docker Dasar
1. Pendahuan:

2. Slide Source Code:
	- Slide: https://docs.google.com/presentation/d/1LoCIoqR68t-y7P7eOs_TVoooZy4mq-tc2cwInQAtfy0/edit?usp=sharing
	- Source Code: https://github.com/ProgrammerZamanNow/belajar-docker-dasar

3. Pendahuluan:

4. Pengenalan Container:
	- Didalam dunia infrastructure kita sudah terbiasa yang namanya VM (Virtual Machine) atau kita sewa misalnya hosting vps itu sebenarnya kita menyewa sebuah virtual machine
	- Kalau teman-teman misalnya anggap aja punya data center sendiri maka infrastructure teman-teman biasa nya kita akan menginstal namanya hypervisor atau istilah virtual machine manager ada banyak aplikasi ini contohnya vm ware atau virtual box dan sebagainya
	- Bagaimana dengan container? Berbeda dengan vm kalau kita menggunkan container sendri itu berfokus pada sisi aplikasinya, jadi kontainer senidri sebenarnya berjalan diatas aplikasi yang namanya container manager, jadi mirip dengan vm itu kan dia jalan diatas yang namanya hypervisor atau virtual machine managaer, tapi kalau biasanya container dia jalannya di container manager, nah container manager otomatis berjalan di sistem operasi, contohnya teman-teman kalau menginstal docker, dan docker otomatis berjalan di laptop teman-teman yang ada sistem operasinya
	- Yang membedakan dengan vm adalah kalau teman-teman mengunaakan container kita bisa mempackage aplikasi kita dan dependency aplikasi kita tanpa harus menggabungkan sistem operasinya, jadi container nya akan menggunkan sistem operasi host dimana container manager nya berjalan jadi kalau misalnya di install di Linux containernya maka dia itu akan menggunakan sistem operasi Linux bawaan dari container manager nya, jadi dia tidak perlu lagi menginstall sistem operasi di dalam si container nya, beda kalau vm walaupun misalnya teman-teman sudah pakai Linux misalnya abis itu install vm didalam vm nya harus kita install Linux lagi misalnya seperti itu. 
	- Nah kalau kita menggunakan container si container itu bisa sistem operasi bawaan dari si container managernya, jadi misalnya di sharing sistem operasi nya, nah karena itu dia tidak butuh sistem opearasi sendiri
	- Nah selain itu biasanya ukuran container biasanya hanya itungan megabyte, kenapa? karena sesuai dengan besar kecilnya aplikasi kita. Kalau aplikasi kita cuman angkanya puluhan mega, yaudah berarti isi nya cuman puluhan mega saja. Berbeda dengan vm bisa hampir mungkin giga atau hampir lebih dari satu giga, kenapa? karena di dalam vm itu ada sistem operasinya. Jadi contohnya teman-teman udah pakai ubuntu, teman-teman install virtual box, habis itu install vm didalamnya teman-teman harus intsal sistem operasi lagi, misalnya ubuntu lagi seperti itu. Nah tapi kalau teman-teman menggunakan container teman-teman bisa pakai langsung sistem operasi bawaannya, jadi teman-teman tidak perlu membuat atau memasukan sistem operasi ke container nya lagi
	- Jadi kurang lebih gambaran nya seperti ini jadi infrastucturenya lalu disini kita mempunyai sistem operasi contohnya misalnya di laptop teman-teman menggunakan windows kah, menggunkan mac atau menggunakan Linux lalu kita akan menginstall docker diatas sistem operasi nya docker adalah contoh container manager, yang membedakan adalah dengan menggunakan container manager ini kita akan bisa membuat istilahnya ini container-container langsung isinya aplikasi aja ada lagi sistem operasi nya, nah kalau gitu apa bedanya kalau seperti ini install langsung aja aplikasi nya tanpa harus mengggunakan docker, nah yang berbeda adalah container itu antar container nya itu terisolalsi jadi dia tidak akan menganggu container lainnya, bayakngkan teman-teman misalnya install database MySQL misalnya lalu install nya ada 3 di laptop teman-teman tanpa mengggunakan container maka yang akan terjadi adalah ketiga tiganya akan terjadi bentrok yang pertama mungin portnya bentrok akhirnya teman-teman harus ganti-ganti port nya, nah kalau menggunakan container dia terisolasi di satu container tersebut, jadi teman-teman mau bikin 3 container MySQL semua itu tidak akan menjadi masalah karena meraka terisolasi, di setiap containernya jadi tidak perlu pusing lagi mikin container sebelahnya, jadi contohnya di aplikasi a saya menginstall php tapi versi 2 misalnnya, dan di app b saya menggukan php versi 3 dan app c saya menggintal php versi 4, nah itu bisa dilakukan jadi ketiga-tiganya terisolasi,nah yangkan teman-teman lagusng mengintal di os maka akan binggung gimana caranya mengintstall php di satu sistem operasi misalnya sperti itu jadi lumayan ribet, kalau menggunkan container itu semuanya menjadi sederhana.
	- kenapa sekrang container sangat populernya karena yang pertama dia ringan nggak perlu install sistem operasi lagi di dalam container nya yang kedua lebih fleksibelnya, ketiga yang paling pasti adalah bisa menggunkan rescore yang lebih sedikit, bayangkan kalau di laptop teman-teman menginstall beberapa sistem operasi pakai vm mungkin 2 atau 3 vm aja sudah habis gitunya resorce nya, tapi kalau container teman-teman bisa di gunakan sebanyak-banyak nya, smapai misalnya laptopnya tidak bisa menampung lagi, karena container itu sengat kecil sekali jadi ini tentang container.

5. Pengenalan Docker:
	- Docker itu adalah salah satu implementasi dari container manager, jadi aplikasi yang digunakan untuk memange container salah satunya saat ini paling populer itu adalah docker. kenapa paling populer? Karena paling mudah di gunakannya , jadi doker itu sederhana hanya salah satu implementasi dari container manager.

6. Arsitektur Docker:
	- Docker menggunakan arsitektur clinet dan server
	- Docker server itu disebut docker daemon
	- Kita mengetika perintah nya di docker clinet tapi itu akan semua mengirimkan perintahnya itu ke docker server nya atau docker daemonnya
	- Saat kita menginstall docker itu sudah terdapat docker client dan dan docker daemon
	- Docker client dan docker daemon bisa berjalan di satu sistem yang sama
	- Docker client dan docker daemon berkomunikasi menggunakan rest api

7. Menginstall Docker:
	- Docker bisa di install hampir semua di sistem operasi
	- Docker desktop itu bisa digunakan di mac dan di windows, nah tapi kalau teman-teman menggunakan Linux teman-teman langsung install dockernya, nah kenap butuh berbeda dengan windows, mac, dan Linux? Karena samapai saat ini kebanyakan docker itu berjalannya di sistem operasi Linux. Jadi ketika teman-teman menginstal di Linux dia tidak butuh lagi istilah sistem operasi untuk dockernya jadi dia bisa langsung menggunakan bawahan Linux yang kita gunakan, nah berbeda kalau misalanya teman-teman menggunakan windows dan mac, biasanya kalau teman-teman menggunakan windows dan mac, maka si docker container dia akan membuat sebuah virtualisasi di dalamnnya adalah sistem operasi Linux
	- Untuk mengecek docker daemon sudah berjalan gunakan perintah: docker version

8. Docker Registry:
	- Docker registry itu adalah tempat kita menyimpan docker image, nah intinya adalah semua docker image biasanya kita simpan di dalam docker registry
	- Dengan kita menggunakan docker registry kita bisa menyimpan image-image yang kita mau atau bahkan kita bisa menggunakan image yang lain yang kalau teman-teman mau yang otomatis kalau teman-teman mau ambil itu teman-teman bisa ambil dari docker registry
	- Daftar melalui link ini: https://hub.docker.com

9. Docker Image:
	- Docker image itu mirip sekali installer aplikasi, jadi anggap aja ini sebagai installer container jadi ini namanya adalah image. Nah dimana dalam docker image itu terdapat aplikasi dan juga dependency-dependency yang dibutuhkan si aplikasi tersebut
	- Sebelum teman-teman menjalankan aplikasi di docker itu kita harus istilahnya itu mendowload dulu si docker imagenya jadi tanpa docker imagenya teman-teman tidak bisa menjalankan aplikasi dockernya.
	- Untuk melihat docker image yang terdapat di dalam docker daemon kita bisa menggunakan perintah: docker image ls
	- Untuk download docker image dari docker registry, kita bisa gunakan perintah: docker image pull namaimage:tag, contohnya: docker image pull redis:latest,dan untuk menghapus perintahnya: docker image rm namaimage:tag, contohnya: docker image rm redis:latest

10. Docker Container:
	- Kalau misalnya image seerti installer aplikasi nya, maka docker continer mirips sekali seperti aplikasi hasil installernya
	- jadi dari satu docker image kita bisa gunakan untuk membuat beberapa docker container, asalkan nama docker container nya berbeda
	- jikalau kita sudah membuat docker container, maka docker image yang digunakan tidak bisa di hapus lagi, sebenarnya docker container tidak mengcopy isi docker image saja, tapi hanya menggunakannya isinya saja
	- saat kita membuat container, secara default container tersebut tidak akan berjalan, jadi mirip seperti ketika kita menginstall aplikasi, jika tidak kita jalankan, maka aplikasi tersbut tidak akan berjalan, begitu juga container, oleh karena itu setelah membuat container, kita perlu menjalankannya jika memang ingin menjalankan containernya
	- untuk melihat semua container baik yang sedang berjalan atau tidak di docker daemon kita bisa gunakan perintah: docker container ls -a
	- untuk melihat container yang sedang berjalan saja gunakan perintah: docker container ls
	- untuk membuat container kita bisa gunakan perintah: docker container create --name namacontainer namaimage:tag
	- untuk nama container tidak boleh sama harus unik dan berbeda
	- untuk menjalankan container yang sudah kita buat, kita bisa gunakan perintah: docker container start containerId/namacontainer
	- ingat nya untuk port itu port di dalam container, jadi tidak ada hubungannya dengan port sistem operasi yang kita gunakanm jadi walaupun di laptop teman-teman misalnya sudah menginstall dengan port yang sekkarang, tenang aja tidak akan bentrok karena daia menggunakan port yang ada di dalam container nya bukan di sistem operasi kita
	- untuk menghentikan container kita bisa gunakan perintah: docker container stop containerId/namacontainer
	- untuk menghapus container yang sudah berhenti kita bisa gunakan perintah: docker container rem containerId/namacontainer

11. Container Log:
	- Kadang kalau terjadi masalah dengan aplikasi yng kita jalankan di dalam containe sering kalai kita ingin melihat log dari aplkasinya nah hal ini dilakukan di log di dalam aplikasinya sehingga kita mudah untuk mendubugging untuk mendapat problem dari permasalahan tersebut
	- untuk melihat log di aplikaso di container kita bisa gunakan perintah sebagai berikut: docker container logs containerId/namacontainer
	- kalau teman-teman mau melihat secara realtime bisa gunakan perintah: docker container logs -f containerId/namacontainer

12. Container Exec:
	- saat kita membuat container aplikasi yang terdapat di container hanya bisa diakases dari si containernya itu sendiri, oleh karena itu kdang kita perlu masuk ke dalam container nya itu sendiri
	- untuk masuk ke dalam container kita bisa menggunakan fitur container exec dimana untuk mengeksekusi kode program yang terdapat di dalam si containernya
	- untuk masuk ke dalam containernya kita bisa mencoba mengekseskusi program bash script yang terdapat di dalam containernya dengan bantuan container exec: docker container exec -t -i containerId/namcontainer /bin/bash
	- -i adalah argument interaktif menjaga input tetap aktif 
	- -t adalah argument untuk alokasi pseudo-TTY (terminal akses)
	- dan unutk /bin/bash contoh program yang terdapat di dalam container

13. Container Port:
	- saat menjalankan container tersebut terisolasi di dalam docker
	- artinya sistem host (misal laptop kita), tidak bisa mengakses aplikasi yang ada di dalam container secara langsung, salah satu caranya adalah harus menggunakan container exec untuk masuk ke dalam container nya	- biasanya sebuah aplikasi berjalan pada port tertentu misal saat kita menjalankan aplikasi redis dia berjalan pada port 6479 kita bisa melihat port apa yang digunakan ketika melihat semua daftar container
	- docker memiliki kemampuan untuk melakukan port forwading yaitu meneruskan sebuah port yang tedapat di sistem host nya ke dalam docker container
	- cara ini cocok jika kita ingin mengekspos port yang terdapat di container ke luar melalui sistem hosttnya
	- untuk melakukan port forwading kita bisa menggunakan perintah berikut ketika membuat containernya: docker container create --name namacontainer -publish posthot:portcontainer image:tag
	- jika kita ingin melakukan port forwading lebih dari satu kita bisa tambahakan dua kali parameter --publish
	- publish juga bisa disingkat menggunakan -p

14. Container Environment Variable:
	- saat membuat aplikasi menggunakan environment variable adalah salah satu teknik agar konfigurasi aplikasi bisa diubah secara dinamis
	- dengan menggunakan environment variable kita bisa mengubah-ubah konfigurasi aplikasi tanpa harus mengubah kode aplikasinya lagi
	- docker container memiliki parameter yang bisa kita gunakan untuk mengirim environment variable ke aplikasi yang terdapat di dalam container
	- untuk menambah environment variable kita bisa menggunakan perintah --env atau -e misal: docker container create --name namacontainer --env KEY="value" --env KEY2="value" image:tag

15. Container Stats:
	- saat menjalankan beberapa container di sitem host pengunaan resource seperti cpu dan memory hanya terlihat digunakan oleh docker saja
	- kadang kita ingin melihat detail dari pengunaan resource untuk tiap containernya
	- untung nya docker memliliki kemampuan untuk melihat penggunaan resource dari tiap container yang sedang berjalan
	- kita bisa gunakan perintah: docker container stats

16. Container Resource Limit:
	- saat membuat container secara default dia akan mengguakan sema cpu dan memory yang diberikan ke docker (mac dan windows) dan akan menggunakan semua cpu dan memory yang tersedia di sitem host (linux)
	- jika terjadi kesalahan misal container terlalu banyak memakan cpu dan memory maka bisa berdampak terhadap performa container lain atau bahkan ke sistem host
	- oleh karena itu ada baiknya ketika kita membuat containe kita memberikan resource limit terhadap container nya
	- saat membuat container kita bisa menentukan jumlah memory yang bisa digunakan oleh container ini dengan menggunakan perintah --memory diikuti dengan angka memory yang diperbolehkan untuk digunakan
	- kita bisa menambahkan ukuran dalam bentuk b (bytes) k (kilo bytes) m (mega bytes) atau g (giga bytes) misal 100m artinya 100 mega bytes
	- selain mengatur memory kita bisa menentukan berapa jumlah cpu yang bisa digunkan oleh container dengan parameter --cpus
	- jika misal kita set dengan nilai 1.5 artinya container bisa menggunkan satu dan setengah cpu core

17. Bind Mounts:
	- bind mounts merupakan kemampuan melakuan mounting (sharing) file atau folder yang terdapat di sitem host ke container yang terdapat di docker
	- fitur ini sangat berguna ketiak misal kita ingin mengirim konfigurasi dari luar container atau misal menyimpan data yang dibuat di aplikasi di dalam container ke dalam folder di sitem host
	- jika file atau folder tidak ada di sistem host secara otomatis akan di buatkan oleh docker
	- untuk melakukan mounting kita bisa menggunakan parameter --mount ketika membuat container
	- isi dari parameter --mount memiliki aturan tersendiri
	- type: tipe mount bind atau volume
	- source: lokasi file atau folder di container
	- readonly: jika ada maka file atau folder hanya bisa dibaca di container tidak bisa di tulis
	- untuk melakukan mounting kita bisa menggunakan perintah berikut: docker container create --name namacontainer --mount "type=bind,source=folder,destination=folder,readonly" image:tag

18. Docker Volume
	- fitur bind mounts sudah ada sejak docker versi awal di versi terbaru direkomandasikan menggunakan docker volume
	- docker volume mirip dengan bind mounts bedanya adalah terdapat management volume dimana kita bisa membuat volume melihat daftar volume dan menghapus volume
	- volume sendiri bisa dianggap storage yang digunakan untuk menyimpan data bedanya dengan bind mounts pada bind mounts data disimpan pada sistem host sedangkan pada volume data di manage oleh docker
	- saat kita membuat container dimanakah data di dalam container itu disimpan secara default semua data container disimpan di dalam volume
	- jika kita coba melihat docker volume kita akan lihat bahwa ada banyak volume yang sudah terbuat walalupuun kita belum pernah membuatnyasama sekali
	- kita bisa gunakan perintah berikut untuk melihat daftar volume: docker volume ls
	- untuk membuat volume kita bisa gunakan perintah: docker volume create namavolume
	- volume yang tidak dugunakan oleh container bisa kita hapus tapi jika volume digunakan oleh container maka tidak bisa kita hapus sampai container nya di hapus
	- untuk menghapus volume kita bisa gunakan perintah: docker volume rm namavolume

19. Container Volume:
	- volume yang sudah kita buat bisa kita gunakan di container
	- keuntungan menggunakan volume adalah jika container kita hapus data akan tetap aman di volume
	- cara menggunakan volume di container sama dengan menggunakan bind mount kita bisa menggunakan parameter --mount namun dengan menggunakan type volume dan source nama volume

20. Backup Volume:
	- sayangnya sampai saat ini tidak ada cara otomatis melakukan backup volume yang sudah kita buat
	- namun kita bisa memanfaatkan container untuk melakukan backup data yang ada di dalam volume ke dalam archive seperti zip atau tar.gz
	- matikan container yang menggunakan volume yang ingin kita backup
	- buat container baru dengan dua mount volume yang ingin kita backup dan bind mount folder dari sistem host
	- lakukan backup menggunakan container dengan cara meng archive isi volume dan simpan di bind mount folder
	- isi file bakup sekarang ada di folder sistem host
	- delete container yang kita gunakan untuk melakukan backup
	- melakukan backup secara manual agak sedikit ribet karena kita harus start container terlebih dahulu setelah backup hapus container nya lagi
	- kita bisa menggunakan perintah run untuk mejalankan perintah di container dan gunakan parameter --rm untuk melakukan otomatis remove container setelah perintahnya selesai berjalan

21. Restore Volume:
	- setelah melakukan backup volume ke dalam file archive kita bisa menyimpan file archive backup tersebut ke tempat yang lebih aman misal ke cloud storage
	- sekarang kita akan coba melakukan restore data backup ke volume baru untuk memastikan data backup yang kita lakukan tidak corrupt
	- buat volume baru untuk lokasi restore data backup
	- buat container baru dengan dua mount volume baru untuk restore backup dan bind mount folder dari sistem host yang berisi file backup
	- lakukan restore menggunakan container dengan cara mengextract isi backup file ke dalam volume
	- isi file backup sekarang sudah di restore ke volume 
	- delete container yang bisa kita gunakan untuk melakukan restore
	- volume baru yang berisi data backup siap digunakan oleh container baru